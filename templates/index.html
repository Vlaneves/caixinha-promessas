{% extends "base.html" %}

{% block content %}
<div class="card text-center p-4">
    <div class="card-body">
        <h1 class="card-title">Caixinha de Promessas</h1>
        <p class="card-text">Clique no botÃ£o abaixo para receber uma promessa de Deus para sua vida hoje!</p>
        
        <form action="/" method="post">
            <button type="submit" class="btn btn-primary btn-lg">Receber Promessa</button>
        </form>

        {% if versiculo %}
        <div class="mt-4 p-3 bg-light rounded">
            <h3>{{ versiculo['livro'] }} {{ versiculo['capitulo'] }}:{{ versiculo['versiculo'] }}</h3>
            <p class="lead">{{ versiculo['texto'] }}</p>
            
            <!-- BotÃ£o de compartilhamento -->
            <button onclick="compartilharWhatsApp()" class="btn btn-whatsapp">
                <i class="bi bi-whatsapp"></i> Compartilhar este versÃ­culo
            </button>
            <p class="text-muted small mt-2">Compartilhe este versÃ­culo com alguÃ©m que vocÃª ama</p>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    function compartilharWhatsApp() {
        {% if versiculo %}
            const texto = "ðŸŒŸ VersÃ­culo do Dia ðŸŒŸ\n\n" +
                          "{{ versiculo['livro'] }} {{ versiculo['capitulo'] }}:{{ versiculo['versiculo'] }}\n" +
                          "{{ versiculo['texto'] }}\n\n" +
                          "Compartilhado via Caixinha de Promessas";
            
            const textoCodificado = encodeURIComponent(texto);
            const urlWhatsApp = `https://wa.me/?text=${textoCodificado}`;
            window.open(urlWhatsApp, '_blank');
        {% endif %}
    }
</script>
{% endblock %}
